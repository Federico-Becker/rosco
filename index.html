<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Rosco</title>

<style>
body{
    margin:0;
    background:radial-gradient(circle at center,#1a1a2e,#000);
    font-family:Arial;
    color:white;
    display:flex;
    flex-direction:column;
    align-items:center;
}

h1{
    margin:10px;
    letter-spacing:3px;
}

#panel{
    display:flex;
    gap:40px;
    margin-bottom:10px;
    font-size:18px;
}

#timer{
    position:absolute;
    right:40px;
    top:120px;
    font-size:28px;
    font-weight:bold;
    background:#111;
    padding:15px 25px;
    border-radius:10px;
    box-shadow:0 0 15px #00ffff;
}

#rosco{
    position:relative;
    width:520px;
    height:520px;
    border-radius:50%;
}

.letra{
    position:absolute;
    width:60px;
    height:60px;
    border-radius:50%;
    background:#0044ff;
    display:flex;
    justify-content:center;
    align-items:center;
    font-weight:bold;
    font-size:20px;
    transition:0.3s;
}

.activa{
    box-shadow:0 0 20px white, 0 0 40px white;
    transform:scale(1.1);
}

.correcto{ background:#00c853 !important; }
.incorrecto{ background:#d50000 !important; }
.pasada{ background:#ffab00 !important; }

#final{
    margin-top:20px;
    font-size:22px;
    display:none;
}
</style>
</head>

<body>

<h1>ROSCO</h1>

<div id="panel">
    <div>‚úî Correctas: <span id="ok">0</span></div>
    <div>‚úñ Incorrectas: <span id="bad">0</span></div>
    <div>‚ûú Pasadas: <span id="pass">0</span></div>
</div>

<div id="timer">‚è≥ 10:00</div>

<div id="rosco"></div>

<div id="final"></div>

<script>
const letras = "ABCDEFGHIJKLMN√ëOPQRSTUVWXYZ".split("");
const rosco = document.getElementById("rosco");
const okSpan = document.getElementById("ok");
const badSpan = document.getElementById("bad");
const passSpan = document.getElementById("pass");
const finalDiv = document.getElementById("final");
const timerDiv = document.getElementById("timer");

let estados = new Array(letras.length).fill("pendiente");
let actual = 0;
let correctas = 0;
let incorrectas = 0;
let pasadas = 0;
let tiempo = 600;
let juegoTerminado = false;
let intervalo;

const radio = 210;
const centro = 260;

letras.forEach((letra, i) => {
    let angulo = (i / letras.length) * (2 * Math.PI);
    let x = centro + radio * Math.cos(angulo) - 30;
    let y = centro + radio * Math.sin(angulo) - 30;

    let div = document.createElement("div");
    div.className = "letra";
    div.innerText = letra;
    div.style.left = x + "px";
    div.style.top = y + "px";
    rosco.appendChild(div);
});

function actualizarActiva(){
    document.querySelectorAll(".letra").forEach((l,i)=>{
        l.classList.remove("activa");
        if(i===actual && estados[i]!=="correcto" && estados[i]!=="incorrecto"){
            l.classList.add("activa");
        }
    });
}

function siguienteDisponible(){
    let vueltas = 0;
    do{
        actual = (actual + 1) % letras.length;
        vueltas++;
        if(vueltas > letras.length) break;
    }while(estados[actual]==="correcto" || estados[actual]==="incorrecto");
}

function sonido(freq){
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const osc = ctx.createOscillator();
    osc.type = "sine";
    osc.frequency.value = freq;
    osc.connect(ctx.destination);
    osc.start();
    setTimeout(()=>osc.stop(),150);
}

function terminar(){
    juegoTerminado = true;
    clearInterval(intervalo);
    finalDiv.style.display="block";
    finalDiv.innerHTML = `
        üéâ Juego terminado üéâ<br>
        ‚úî ${correctas} correctas<br>
        ‚úñ ${incorrectas} incorrectas<br>
        ‚ûú ${pasadas} pasadas<br><br>
        Presiona R para reiniciar
    `;
}

function actualizarTimer(){
    let min = Math.floor(tiempo/60);
    let seg = tiempo % 60;
    timerDiv.textContent = `‚è≥ ${min}:${seg<10?"0":""}${seg}`;
}

intervalo = setInterval(()=>{
    if(juegoTerminado) return;
    tiempo--;
    actualizarTimer();
    if(tiempo<=0){
        terminar();
    }
},1000);

actualizarTimer();
actualizarActiva();

document.addEventListener("keydown", function(e){
    if(e.key.toLowerCase()==="r"){
        location.reload();
        return;
    }

    if(juegoTerminado) return;

    let letrasDiv = document.querySelectorAll(".letra");
    let key = e.key.toLowerCase();

    if(estados[actual]==="correcto" || estados[actual]==="incorrecto"){
        siguienteDisponible();
        actualizarActiva();
        return;
    }

    if(key==="c"){
        estados[actual]="correcto";
        letrasDiv[actual].classList.remove("pasada");
        letrasDiv[actual].classList.add("correcto");
        correctas++;
        okSpan.textContent=correctas;
        sonido(800);
        siguienteDisponible();
    }

    if(key==="i"){
        estados[actual]="incorrecto";
        letrasDiv[actual].classList.remove("pasada");
        letrasDiv[actual].classList.add("incorrecto");
        incorrectas++;
        badSpan.textContent=incorrectas;
        sonido(200);
        siguienteDisponible();
    }

    if(key==="p"){
        if(estados[actual]!=="pasada"){
            estados[actual]="pasada";
            letrasDiv[actual].classList.add("pasada");
            pasadas++;
            passSpan.textContent=pasadas;
        }
        sonido(500);
        siguienteDisponible();
    }

    actualizarActiva();

    if(estados.every(e => e==="correcto" || e==="incorrecto")){
        terminar();
    }
});
</script>

</body>
</html>